// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/hash/tests/fnv132.phpt
  it("Hash: FNV132 algorithm", function () {
    expect(parser.parseCode("<?php\nfunction R10($t) {\n    return str_repeat($t, 10);\n}\nfunction R500($t) {\n    return str_repeat($t, 500);\n}\n$tests = array(\n    array( \"\", \"811c9dc5\" ),\n    array( \"a\", \"050c5d7e\" ),\n    array( \"b\", \"050c5d7d\" ),\n    array( \"c\", \"050c5d7c\" ),\n    array( \"d\", \"050c5d7b\" ),\n    array( \"e\", \"050c5d7a\" ),\n    array( \"f\", \"050c5d79\" ),\n    array( \"fo\", \"6b772514\" ),\n    array( \"foo\", \"408f5e13\" ),\n    array( \"foob\", \"b4b1178b\" ),\n    array( \"fooba\", \"fdc80fb0\" ),\n    array( \"foobar\", \"31f0b262\" ),\n    array( \"\\0\", \"050c5d1f\" ),\n    array( \"a\\0\", \"70772d5a\" ),\n    array( \"b\\0\", \"6f772bc7\" ),\n    array( \"c\\0\", \"6e772a34\" ),\n    array( \"d\\0\", \"6d7728a1\" ),\n    array( \"e\\0\", \"6c77270e\" ),\n    array( \"f\\0\", \"6b77257b\" ),\n    array( \"fo\\0\", \"408f5e7c\" ),\n    array( \"foo\\0\", \"b4b117e9\" ),\n    array( \"foob\\0\", \"fdc80fd1\" ),\n    array( \"fooba\\0\", \"31f0b210\" ),\n    array( \"foobar\\0\", \"ffe8d046\" ),\n    array( \"ch\", \"6e772a5c\" ),\n    array( \"cho\", \"4197aebb\" ),\n    array( \"chon\", \"fcc8100f\" ),\n    array( \"chong\", \"fdf147fa\" ),\n    array( \"chongo\", \"bcd44ee1\" ),\n    array( \"chongo \", \"23382c13\" ),\n    array( \"chongo w\", \"846d619e\" ),\n    array( \"chongo wa\", \"1630abdb\" ),\n    array( \"chongo was\", \"c99e89b2\" ),\n    array( \"chongo was \", \"1692c316\" ),\n    array( \"chongo was h\", \"9f091bca\" ),\n    array( \"chongo was he\", \"2556be9b\" ),\n    array( \"chongo was her\", \"628e0e73\" ),\n    array( \"chongo was here\", \"98a0bf6c\" ),\n    array( \"chongo was here!\", \"b10d5725\" ),\n    array( \"chongo was here!\\n\", \"dd002f35\" ),\n    array( \"ch\\0\", \"4197aed4\" ),\n    array( \"cho\\0\", \"fcc81061\" ),\n    array( \"chon\\0\", \"fdf1479d\" ),\n    array( \"chong\\0\", \"bcd44e8e\" ),\n    array( \"chongo\\0\", \"23382c33\" ),\n    array( \"chongo \\0\", \"846d61e9\" ),\n    array( \"chongo w\\0\", \"1630abba\" ),\n    array( \"chongo wa\\0\", \"c99e89c1\" ),\n    array( \"chongo was\\0\", \"1692c336\" ),\n    array( \"chongo was \\0\", \"9f091ba2\" ),\n    array( \"chongo was h\\0\", \"2556befe\" ),\n    array( \"chongo was he\\0\", \"628e0e01\" ),\n    array( \"chongo was her\\0\", \"98a0bf09\" ),\n    array( \"chongo was here\\0\", \"b10d5704\" ),\n    array( \"chongo was here!\\0\", \"dd002f3f\" ),\n    array( \"chongo was here!\\n\\0\", \"1c4a506f\" ),\n    array( \"cu\", \"6e772a41\" ),\n    array( \"cur\", \"26978421\" ),\n    array( \"curd\", \"e184ff97\" ),\n    array( \"curds\", \"9b5e5ac6\" ),\n    array( \"curds \", \"5b88e592\" ),\n    array( \"curds a\", \"aa8164b7\" ),\n    array( \"curds an\", \"20b18c7b\" ),\n    array( \"curds and\", \"f28025c5\" ),\n    array( \"curds and \", \"84bb753f\" ),\n    array( \"curds and w\", \"3219925a\" ),\n    array( \"curds and wh\", \"384163c6\" ),\n    array( \"curds and whe\", \"54f010d7\" ),\n    array( \"curds and whey\", \"8cea820c\" ),\n    array( \"curds and whey\\n\", \"e12ab8ee\" ),\n    array( \"cu\\0\", \"26978453\" ),\n    array( \"cur\\0\", \"e184fff3\" ),\n    array( \"curd\\0\", \"9b5e5ab5\" ),\n    array( \"curds\\0\", \"5b88e5b2\" ),\n    array( \"curds \\0\", \"aa8164d6\" ),\n    array( \"curds a\\0\", \"20b18c15\" ),\n    array( \"curds an\\0\", \"f28025a1\" ),\n    array( \"curds and\\0\", \"84bb751f\" ),\n    array( \"curds and \\0\", \"3219922d\" ),\n    array( \"curds and w\\0\", \"384163ae\" ),\n    array( \"curds and wh\\0\", \"54f010b2\" ),\n    array( \"curds and whe\\0\", \"8cea8275\" ),\n    array( \"curds and whey\\0\", \"e12ab8e4\" ),\n    array( \"curds and whey\\n\\0\", \"64411eaa\" ),\n    array( \"line 1\\nline 2\\nline 3\", \"31ae8f83\" ),\n    array( \"chongo <Landon Curt Noll> /\\\\../\\\\\", \"995fa9c4\" ),\n    array( \"chongo <Landon Curt Noll> /\\\\../\\\\\\0\", \"35983f8c\" ),\n    array( \"chongo (Landon Curt Noll) /\\\\../\\\\\", \"5036a251\" ),\n    array( \"chongo (Landon Curt Noll) /\\\\../\\\\\\0\", \"97018583\" ),\n    array( \"http://antwrp.gsfc.nasa.gov/apod/astropix.html\", \"b4448d60\" ),\n    array( \"http://en.wikipedia.org/wiki/Fowler_Noll_Vo_hash\", \"025dfe59\" ),\n    array( \"http://epod.usra.edu/\", \"c5eab3af\" ),\n    array( \"http://exoplanet.eu/\", \"7d21ba1e\" ),\n    array( \"http://hvo.wr.usgs.gov/cam3/\", \"7704cddb\" ),\n    array( \"http://hvo.wr.usgs.gov/cams/HMcam/\", \"d0071bfe\" ),\n    array( \"http://hvo.wr.usgs.gov/kilauea/update/deformation.html\", \"0ff3774c\" ),\n    array( \"http://hvo.wr.usgs.gov/kilauea/update/images.html\", \"b0fea0ea\" ),\n    array( \"http://hvo.wr.usgs.gov/kilauea/update/maps.html\", \"58177303\" ),\n    array( \"http://hvo.wr.usgs.gov/volcanowatch/current_issue.html\", \"4f599cda\" ),\n    array( \"http://neo.jpl.nasa.gov/risk/\", \"3e590a47\" ),\n    array( \"http://norvig.com/21-days.html\", \"965595f8\" ),\n    array( \"http://primes.utm.edu/curios/home.php\", \"c37f178d\" ),\n    array( \"http://slashdot.org/\", \"9711dd26\" ),\n    array( \"http://tux.wr.usgs.gov/Maps/155.25-19.5.html\", \"23c99b7f\" ),\n    array( \"http://volcano.wr.usgs.gov/kilaueastatus.php\", \"6e568b17\" ),\n    array( \"http://www.avo.alaska.edu/activity/Redoubt.php\", \"43f0245b\" ),\n    array( \"http://www.dilbert.com/fast/\", \"bcb7a001\" ),\n    array( \"http://www.fourmilab.ch/gravitation/orbits/\", \"12e6dffe\" ),\n    array( \"http://www.fpoa.net/\", \"0792f2d6\" ),\n    array( \"http://www.ioccc.org/index.html\", \"b966936b\" ),\n    array( \"http://www.isthe.com/cgi-bin/number.cgi\", \"46439ac5\" ),\n    array( \"http://www.isthe.com/chongo/bio.html\", \"728d49af\" ),\n    array( \"http://www.isthe.com/chongo/index.html\", \"d33745c9\" ),\n    array( \"http://www.isthe.com/chongo/src/calc/lucas-calc\", \"bc382a57\" ),\n    array( \"http://www.isthe.com/chongo/tech/astro/venus2004.html\", \"4bda1d31\" ),\n    array( \"http://www.isthe.com/chongo/tech/astro/vita.html\", \"ce35ccae\" ),\n    array( \"http://www.isthe.com/chongo/tech/comp/c/expert.html\", \"3b6eed94\" ),\n    array( \"http://www.isthe.com/chongo/tech/comp/calc/index.html\", \"445c9c58\" ),\n    array( \"http://www.isthe.com/chongo/tech/comp/fnv/index.html\", \"3db8bf9d\" ),\n    array( \"http://www.isthe.com/chongo/tech/math/number/howhigh.html\", \"2dee116d\" ),\n    array( \"http://www.isthe.com/chongo/tech/math/number/number.html\", \"c18738da\" ),\n    array( \"http://www.isthe.com/chongo/tech/math/prime/mersenne.html\", \"5b156176\" ),\n    array( \"http://www.isthe.com/chongo/tech/math/prime/mersenne.html#largest\", \"2aa7d593\" ),\n    array( \"http://www.lavarnd.org/cgi-bin/corpspeak.cgi\", \"b2409658\" ),\n    array( \"http://www.lavarnd.org/cgi-bin/haiku.cgi\", \"e1489528\" ),\n    array( \"http://www.lavarnd.org/cgi-bin/rand-none.cgi\", \"fe1ee07e\" ),\n    array( \"http://www.lavarnd.org/cgi-bin/randdist.cgi\", \"e8842315\" ),\n    array( \"http://www.lavarnd.org/index.html\", \"3a6a63a2\" ),\n    array( \"http://www.lavarnd.org/what/nist-test.html\", \"06d2c18c\" ),\n    array( \"http://www.macosxhints.com/\", \"f8ef7225\" ),\n    array( \"http://www.mellis.com/\", \"843d3300\" ),\n    array( \"http://www.nature.nps.gov/air/webcams/parks/havoso2alert/havoalert.cfm\", \"bb24f7ae\" ),\n    array( \"http://www.nature.nps.gov/air/webcams/parks/havoso2alert/timelines_24.cfm\", \"878c0ec9\" ),\n    array( \"http://www.paulnoll.com/\", \"b557810f\" ),\n    array( \"http://www.pepysdiary.com/\", \"57423246\" ),\n    array( \"http://www.sciencenews.org/index/home/activity/view\", \"87f7505e\" ),\n    array( \"http://www.skyandtelescope.com/\", \"bb809f20\" ),\n    array( \"http://www.sput.nl/~rob/sirius.html\", \"8932abb5\" ),\n    array( \"http://www.systemexperts.com/\", \"0a9b3aa0\" ),\n    array( \"http://www.tq-international.com/phpBB3/index.php\", \"b8682a24\" ),\n    array( \"http://www.travelquesttours.com/index.htm\", \"a7ac1c56\" ),\n    array( \"http://www.wunderground.com/global/stations/89606.html\", \"11409252\" ),\n    array( R10(\"21701\"), \"a987f517\" ),\n    array( R10(\"M21701\"), \"f309e7ed\" ),\n    array( R10(\"2^21701-1\"), \"c9e8f417\" ),\n    array( R10(\"\\x54\\xc5\"), \"7f447bdd\" ),\n    array( R10(\"\\xc5\\x54\"), \"b929adc5\" ),\n    array( R10(\"23209\"), \"57022879\" ),\n    array( R10(\"M23209\"), \"dcfd2c49\" ),\n    array( R10(\"2^23209-1\"), \"6edafff5\" ),\n    array( R10(\"\\x5a\\xa9\"), \"f04fb1f1\" ),\n    array( R10(\"\\xa9\\x5a\"), \"fb7de8b9\" ),\n    array( R10(\"391581216093\"), \"c5f1d7e9\" ),\n    array( R10(\"391581*2^216093-1\"), \"32c1f439\" ),\n    array( R10(\"\\x05\\xf9\\x9d\\x03\\x4c\\x81\"), \"7fd3eb7d\" ),\n    array( R10(\"FEDCBA9876543210\"), \"81597da5\" ),\n    array( R10(\"\\xfe\\xdc\\xba\\x98\\x76\\x54\\x32\\x10\"), \"05eb7a25\" ),\n    array( R10(\"EFCDAB8967452301\"), \"9c0fa1b5\" ),\n    array( R10(\"\\xef\\xcd\\xab\\x89\\x67\\x45\\x23\\x01\"), \"53ccb1c5\" ),\n    array( R10(\"0123456789ABCDEF\"), \"fabece15\" ),\n    array( R10(\"\\x01\\x23\\x45\\x67\\x89\\xab\\xcd\\xef\"), \"4ad745a5\" ),\n    array( R10(\"1032547698BADCFE\"), \"e5bdc495\" ),\n    array( R10(\"\\x10\\x32\\x54\\x76\\x98\\xba\\xdc\\xfe\"), \"23b3c0a5\" ),\n    array( R500(\"\\x00\"), \"fa823dd5\" ),\n    array( R500(\"\\x07\"), \"0c6c58b9\" ),\n    array( R500(\"~\"), \"e2dbccd5\" ),\n    array( R500(\"\\x7f\"), \"db7f50f9\" ),\n);\n$i = 0;\n$pass = true;\nforeach($tests as $test) {\n    $result = hash('fnv132', $test[0]);\n    if ($result != $test[1]) {\n        echo \"Iteration \" . $i . \" failed - expected '\" . $test[1] . \"', got '\" . $result . \"' for '\" . $test[1] . \"'\\n\";\n        $pass = false;\n    }\n    $i++;\n}\nif($pass) {\n    echo \"PASS\";\n}\n?>")).toMatchSnapshot();
  });
});
