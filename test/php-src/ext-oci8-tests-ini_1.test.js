// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/oci8/tests/ini_1.phpt
  it("Test OCI8 php.ini settings", function () {
    expect(parser.parseCode("<?php\necho \"Test 1 - check initialization\\n\";\necho 'oci8.privileged_connect = ' . ini_get('oci8.privileged_connect') . \"\\n\";\necho 'oci8.max_persistent = ' . ini_get('oci8.max_persistent') . \"\\n\";\necho 'oci8.persistent_timeout = ' . ini_get('oci8.persistent_timeout') . \"\\n\";\necho 'oci8.ping_interval = ' . ini_get('oci8.ping_interval') . \"\\n\";\necho 'oci8.connection_class = ' . ini_get('oci8.connection_class') . \"\\n\";\necho 'oci8.events = ' . ini_get('oci8.events') . \"\\n\";\necho 'oci8.statement_cache_size = ' . ini_get('oci8.statement_cache_size') . \"\\n\";\necho 'oci8.default_prefetch = ' . ini_get('oci8.default_prefetch') . \"\\n\";\necho 'oci8.old_oci_close_semantics = ' . ini_get('oci8.old_oci_close_semantics') . \"\\n\";\necho \"Test 2 - check what can be changed at runtime\\n\";\nvar_dump(ini_set('oci8.privileged_connect', 'Off'));\necho 'oci8.privileged_connect = ' . ini_get('oci8.privileged_connect') . \"\\n\";\nvar_dump(ini_set('oci8.max_persistent', '999'));\necho 'oci8.max_persistent = ' . ini_get('oci8.max_persistent') . \"\\n\";\nvar_dump(ini_set('oci8.persistent_timeout', '888'));\necho 'oci8.persistent_timeout = ' . ini_get('oci8.persistent_timeout') . \"\\n\";\nvar_dump(ini_set('oci8.ping_interval', '777'));\necho 'oci8.ping_interval = ' . ini_get('oci8.ping_interval') . \"\\n\";\nvar_dump(ini_set('oci8.connection_class', 'OtherCC'));\necho 'oci8.connection_class = ' . ini_get('oci8.connection_class') . \"\\n\";\nvar_dump(ini_set('oci8.events', 'Off'));\necho 'oci8.events = ' . ini_get('oci8.events') . \"\\n\";\nvar_dump(ini_set('oci8.statement_cache_size', '666'));\necho 'oci8.statement_cache_size = ' . ini_get('oci8.statement_cache_size') . \"\\n\";\nvar_dump(ini_set('oci8.default_prefetch', '111'));\necho 'oci8.default_prefetch = ' . ini_get('oci8.default_prefetch') . \"\\n\";\nvar_dump(ini_set('oci8.old_oci_close_semantics', 'Off'));\necho 'oci8.old_oci_close_semantics = ' . ini_get('oci8.old_oci_close_semantics') . \"\\n\";\n?>")).toMatchSnapshot();
  });
});
