// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/date/tests/bug20382-2.phpt
  it("Bug #20382 [2] (strtotime (\"Monday\", $date) produces wrong result on DST changeover)", function () {
    expect(parser.parseCode("<?php\n$tests = array(\n    array(\"Europe/Andorra\",     17, 17, 17, 1, 24764, 1970),\n    array(\"Asia/Dubai\",         17, 17, 17, 1, 1, 1970),\n    array(\"Asia/Kabul\",         17, 17, 17, 1, 1, 1970),\n    array(\"America/Antigua\",    17, 17, 17, 1, 1, 1970),\n    array(\"America/Anguilla\",   17, 17, 17, 1, 1, 1970),\n    array(\"Europe/Tirane\",      17, 17, 17, 1, 4849, 1970),\n    array(\"Asia/Yerevan\",       17, 17, 17, 1, 24764, 1970),\n    array(\"America/Curacao\",    17, 17, 17, 1, 1, 1970),\n    array(\"Africa/Luanda\",      17, 17, 17, 1, 1, 1970),\n    array(\"Antarctica/McMurdo\", 17, 17, 17, 1, 24743, 1970),\n    array(\"Australia/Adelaide\", 17, 17, 17, 1, 1, 1971),\n    array(\"Australia/Darwin\",   17, 17, 17, 1, 88, 1971),\n    array(\"Australia/Perth\",    17, 17, 17, 1, 1, 1971),\n    array(\"America/Aruba\",      17, 17, 17, 1, 88, 1971),\n    array(\"Asia/Baku\",          17, 17, 17, 1, 1, 1971),\n    array(\"Europe/Sarajevo\",    17, 17, 17, 1, 1, 1971),\n    array(\"America/Barbados\",   17, 17, 17, 1, 1, 1971),\n    array(\"Asia/Dacca\",         17, 17, 17, 1, 1, 1971),\n    array(\"Europe/Brussels\",    17, 17, 17, 1, 1, 1971),\n    array(\"Africa/Ouagadougou\", 17, 17, 17, 1, 88, 1971),\n    array(\"Europe/Tirane\",      17, 17, 17, 1, 4849, 1970),\n    array(\"America/Buenos_Aires\", 17, 17, 17, 1, 1734, 1970),\n    array(\"America/Rosario\",    17, 17, 17, 1, 1734, 1970),\n    array(\"Europe/Vienna\",      17, 17, 17, 1, 3743, 1970),\n    array(\"Asia/Baku\",          17, 17, 17, 1, 9490, 1970),\n);\nforeach ($tests as $test) {\n    date_default_timezone_set($test[0]);\n    print \"{$test[0]}\\n\";\n    array_shift($test);\n    $timestamp = call_user_func_array('mktime', $test);\n    print \"ts     = \". date(\"l Y-m-d H:i:s T\", $timestamp). \"\\n\";\n    $strtotime_tstamp = strtotime(\"first monday\", $timestamp);\n    print \"result = \".date(\"l Y-m-d H:i:s T\", $strtotime_tstamp).\"\\n\";\n    print \"wanted = Monday            00:00:00\\n\\n\";\n}\n?>")).toMatchSnapshot();
  });
});
