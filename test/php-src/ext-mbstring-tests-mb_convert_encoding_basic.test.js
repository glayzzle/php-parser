// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/mbstring/tests/mb_convert_encoding_basic.phpt
  it("Test mb_convert_encoding() function : basic functionality", function () {
    expect(parser.parseCode("<?php\n/*\n * Test basic functionality of mb_convert_encoding()\n */\necho \"*** Testing mb_convert_encoding() : basic functionality ***\\n\";\n//All strings are the same when displayed in their respective encodings\n$sjis_string = base64_decode('k/qWe4zqg2WDTINYg2eCxYK3gUIwMTIzNIJUglWCVoJXgliBQg==');\n$jis_string = base64_decode('GyRCRnxLXDhsJUYlLSU5JUgkRyQ5ISMbKEIwMTIzNBskQiM1IzYjNyM4IzkhIxsoQg==');\n$euc_jp_string = base64_decode('xvzL3LjspcalraW5pcikx6S5oaMwMTIzNKO1o7ajt6O4o7mhow==');\n$utf8_string = base64_decode('5pel5pys6Kqe44OG44Kt44K544OI44Gn44GZ44CCMDEyMzTvvJXvvJbvvJfvvJjvvJnjgII=');\necho \"\\n-- Convert to JIS --\\n\";\necho \"JIS encoded string in base64:\\n\";\nvar_dump(base64_encode($jis_string));\necho \"Converted Strings:\\n\";\nvar_dump(base64_encode(mb_convert_encoding($sjis_string, 'JIS', 'SJIS')));\nvar_dump(base64_encode(mb_convert_encoding($euc_jp_string, 'JIS', 'EUC-JP')));\nvar_dump(base64_encode(mb_convert_encoding($utf8_string, 'JIS', 'UTF-8')));\necho \"\\n-- Convert to EUC-JP --\\n\";\necho \"EUC-JP encoded string in base64:\\n\";\nvar_dump(base64_encode($euc_jp_string));\necho \"Converted Strings:\\n\";\nvar_dump(base64_encode(mb_convert_encoding($sjis_string, 'EUC-JP', 'SJIS')));\nvar_dump(base64_encode(mb_convert_encoding($jis_string, 'EUC-JP', 'JIS')));\nvar_dump(base64_encode(mb_convert_encoding($utf8_string, 'EUC-JP', 'UTF-8')));\necho \"\\n-- Convert to SJIS --\\n\";\necho \"SJIS encoded string in base64:\\n\";\nvar_dump(base64_encode($sjis_string));\necho \"Converted Strings:\\n\";\nvar_dump(base64_encode(mb_convert_encoding($jis_string, 'SJIS', 'JIS')));\nvar_dump(base64_encode(mb_convert_encoding($euc_jp_string, 'SJIS', 'EUC-JP')));\nvar_dump(base64_encode(mb_convert_encoding($utf8_string, 'SJIS', 'UTF-8')));\necho \"\\n-- Convert to UTF-8 --\\n\";\necho \"UTF-8 encoded string in base64:\\n\";\nvar_dump(base64_encode($utf8_string));\necho \"Converted Strings:\\n\";\nvar_dump(base64_encode(mb_convert_encoding($sjis_string, 'UTF-8', 'SJIS')));\nvar_dump(base64_encode(mb_convert_encoding($jis_string, 'UTF-8', 'JIS')));\nvar_dump(base64_encode(mb_convert_encoding($euc_jp_string, 'UTF-8', 'EUC-JP')));\necho \"Done\";\n?>")).toMatchSnapshot();
  });
});
