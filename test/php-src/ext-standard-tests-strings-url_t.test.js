// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/standard/tests/strings/url_t.phpt
  it("parse_url() function", function () {
    expect(parser.parseCode("<?php\n$sample_urls = array (\n'',\n'64.246.30.37',\n'http://64.246.30.37',\n'http://64.246.30.37/',\n'64.246.30.37/',\n'64.246.30.37:80/',\n'php.net',\n'php.net/',\n'http://php.net',\n'http://php.net/',\n'www.php.net',\n'www.php.net/',\n'http://www.php.net',\n'http://www.php.net/',\n'www.php.net:80',\n'http://www.php.net:80',\n'http://www.php.net:80/',\n'http://www.php.net/index.php',\n'www.php.net/?',\n'www.php.net:80/?',\n'http://www.php.net/?',\n'http://www.php.net:80/?',\n'http://www.php.net:80/index.php',\n'http://www.php.net:80/foo/bar/index.php',\n'http://www.php.net:80/this/is/a/very/deep/directory/structure/and/file.php',\n'http://www.php.net:80/this/is/a/very/deep/directory/structure/and/file.php?lots=1&of=2&parameters=3&too=4&here=5',\n'http://www.php.net:80/this/is/a/very/deep/directory/structure/and/',\n'http://www.php.net:80/this/is/a/very/deep/directory/structure/and/file.php',\n'http://www.php.net:80/this/../a/../deep/directory',\n'http://www.php.net:80/this/../a/../deep/directory/',\n'http://www.php.net:80/this/is/a/very/deep/directory/../file.php',\n'http://www.php.net:80/index.php',\n'http://www.php.net:80/index.php?',\n'http://www.php.net:80/#foo',\n'http://www.php.net:80/?#',\n'http://www.php.net:80/?test=1',\n'http://www.php.net/?test=1&',\n'http://www.php.net:80/?&',\n'http://www.php.net:80/index.php?test=1&',\n'http://www.php.net/index.php?&',\n'http://www.php.net:80/index.php?foo&',\n'http://www.php.net/index.php?&foo',\n'http://www.php.net:80/index.php?test=1&test2=char&test3=mixesCI',\n'www.php.net:80/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123',\n'http://secret@www.php.net:80/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123',\n'http://secret:@www.php.net/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123',\n'http://:hideout@www.php.net:80/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123',\n'http://secret:hideout@www.php.net/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123',\n'http://secret@hideout@www.php.net:80/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123',\n'http://secret:hid:out@www.php.net:80/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123',\n'nntp://news.php.net',\n'ftp://ftp.gnu.org/gnu/glic/glibc.tar.gz',\n'zlib:http://foo@bar',\n'zlib:filename.txt',\n'zlib:/path/to/my/file/file.txt',\n'foo://foo@bar',\n'mailto:me@mydomain.com',\n'/foo.php?a=b&c=d',\n'foo.php?a=b&c=d',\n'http://user:passwd@www.example.com:8080?bar=1&boom=0',\n'file:///path/to/file',\n'file://path/to/file',\n'file:/path/to/file',\n'http://1.2.3.4:/abc.asp?a=1&b=2',\n'http://foo.com#bar',\n'scheme:',\n'foo+bar://baz@bang/bla',\n'gg:9130731',\n'http://user:@pass@host/path?argument?value#etc',\n);\n    foreach ($sample_urls as $url) {\n        echo \"\\n--> $url: \";\n        var_dump(@parse_url($url));\n    }\n    $url = 'http://secret:hideout@www.php.net:80/index.php?test=1&test2=char&test3=mixesCI#some_page_ref123';\n    foreach (array(PHP_URL_SCHEME,PHP_URL_HOST,PHP_URL_PORT,PHP_URL_USER,PHP_URL_PASS,PHP_URL_PATH,PHP_URL_QUERY,PHP_URL_FRAGMENT) as $v) {\n    var_dump(parse_url($url, $v));\n    }\n?>")).toMatchSnapshot();
  });
});
