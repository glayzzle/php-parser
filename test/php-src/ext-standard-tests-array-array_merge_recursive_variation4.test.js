// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/standard/tests/array/array_merge_recursive_variation4.phpt
  it("Test array_merge_recursive() function : usage variations - associative array with different keys", function () {
    expect(parser.parseCode("<?php\n/*\n * Testing the functionality of array_merge_recursive() by passing different\n * associative arrays having different keys to $arr1 argument.\n*/\necho \"*** Testing array_merge_recursive() : assoc. array with diff. keys to \\$arr1 argument ***\\n\";\n// get an unset variable\n$unset_var = 10;\nunset ($unset_var);\n// get a resource variable\n$fp = fopen(__FILE__, \"r\");\n// get a class\nclass classA\n{\n  public function __toString(){\n    return \"Class A object\";\n  }\n}\n// get a heredoc string\n$heredoc = <<<EOT\nHello world\nEOT;\n// different associative arrays to be passed to $arr1 argument\n$arrays = array (\n/*1*/  // arrays with integer keys\n       array(0 => \"0\", 1 => array(1 => \"one\")),\n       array(1 => \"1\", 2 => array(1 => \"one\", 2 => \"two\", 3 => 1, 4 => \"4\")),\n       // arrays with string keys\n/*5*/  array('\\tHello' => array(\"hello\", 'world'), '\\v\\fworld' => 2.2, 'pen\\n' => 111),\n       array(\"\\tHello\" => array(\"hello\", 'world'), \"\\v\\fworld\" => 2.2, \"pen\\n\" => 111),\n       array(\"hello\", $heredoc => array(\"heredoc\", 'string'), \"string\"),\n       // array with object, unset variable and resource variable\n/*8*/ array(@$unset_var => array(\"unset\"), $fp => 'resource', 11, \"hello\")\n);\n// initialise the second array\n$arr2 = array( 1 => \"one\", 2, \"string\" => \"hello\", \"array\" => array(\"a\", \"b\", \"c\"));\n// loop through each sub array of $arrays and check the behavior of array_merge_recursive()\n$iterator = 1;\nforeach($arrays as $arr1) {\n  echo \"-- Iteration $iterator --\\n\";\n  // with default argument\n  echo \"-- With default argument --\\n\";\n  var_dump( array_merge_recursive($arr1) );\n  // with more arguments\n  echo \"-- With more arguments --\\n\";\n  var_dump( array_merge_recursive($arr1, $arr2) );\n  $iterator++;\n}\n// close the file resource used\nfclose($fp);\necho \"Done\";\n?>")).toMatchSnapshot();
  });
});
