// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/gd/tests/bug24594.phpt
  it("Bug #24594 (Filling an area using tiles).", function () {
    expect(parser.parseCode("<?php\n    $tile = imagecreate(36,36);\n    $base = imagecreate(150,150);\n    $white = imagecolorallocate($tile,255,255,255);\n    $black = imagecolorallocate($tile,0,0,0);\n    $white = imagecolorallocate($base,255,255,255);\n    $black = imagecolorallocate($base,0,0,0);\n    /* create the dots pattern */\n    for ($x=0;$x<36;$x+=2) {\n        for ($y=0;$y<36;$y+=2) {\n            imagesetpixel($tile,$x,$y,$black);\n        }\n    }\n    imagesettile($base,$tile);\n    imagerectangle($base, 9,9,139,139,$black);\n    imageline($base, 9,9,139,139,$black);\n    imagefill($base,11,12,IMG_COLOR_TILED);\n    $res = imagecolorat($base,0,10)==$black?'1':'0';\n    $res .= imagecolorat($base,0,20)==$black?'1':'0';\n    $res .= imagecolorat($base,0,30)==$black?'1':'0';\n    $res .= imagecolorat($base,0,40)==$black?'1':'0';\n    $res .= imagecolorat($base,0,50)==$black?'1':'0';\n    $res .= imagecolorat($base,0,60)==$black?'1':'0';\n    $res .= imagecolorat($base,11,12)==$white?'1':'0';\n    $res .= imagecolorat($base,12,13)==$white?'1':'0';\n    $res .= imagecolorat($base,13,14)==$white?'1':'0';\n    $res .= imagecolorat($base,14,15)==$white?'1':'0';\n    $res .= imagecolorat($base,15,16)==$white?'1':'0';\n    $res .= imagecolorat($base,16,17)==$white?'1':'0';\n    $res .= imagecolorat($base,10,12)==$black?'1':'0';\n    $res .= imagecolorat($base,11,13)==$black?'1':'0';\n    $res .= imagecolorat($base,12,14)==$black?'1':'0';\n    $res .= imagecolorat($base,13,15)==$black?'1':'0';\n    $res .= imagecolorat($base,14,16)==$black?'1':'0';\n    $res .= imagecolorat($base,15,17)==$black?'1':'0';\n    echo \"$res\\n\";\n    imagefilledrectangle($base,0,0,149,149,$white);\n    imagerectangle($base, 9,9,139,139,$black);\n    imageline($base, 9,9,139,139,$black);\n    imagefill($base,0,0,IMG_COLOR_TILED);\n    $res = imagecolorat($base,0,10)==$black?'1':'0';\n    $res .= imagecolorat($base,0,20)==$black?'1':'0';\n    $res .= imagecolorat($base,0,30)==$black?'1':'0';\n    $res .= imagecolorat($base,0,40)==$black?'1':'0';\n    $res .= imagecolorat($base,0,50)==$black?'1':'0';\n    $res .= imagecolorat($base,0,60)==$black?'1':'0';\n    $res .= imagecolorat($base,11,12)==$white?'1':'0';\n    $res .= imagecolorat($base,12,13)==$white?'1':'0';\n    $res .= imagecolorat($base,13,14)==$white?'1':'0';\n    $res .= imagecolorat($base,14,15)==$white?'1':'0';\n    $res .= imagecolorat($base,15,16)==$white?'1':'0';\n    $res .= imagecolorat($base,16,17)==$white?'1':'0';\n    $res .= imagecolorat($base,0,16)==$black?'1':'0';\n    $res .= imagecolorat($base,2,42)==$black?'1':'0';\n    $res .= imagecolorat($base,4,44)==$black?'1':'0';\n    $res .= imagecolorat($base,146,146)==$black?'1':'0';\n    $res .= imagecolorat($base,148,146)==$black?'1':'0';\n    $res .= imagecolorat($base,0,0)==$black?'1':'0';\n    echo \"$res\\n\";\n?>")).toMatchSnapshot();
  });
});
