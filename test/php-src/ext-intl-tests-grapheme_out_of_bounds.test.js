// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/intl/tests/grapheme_out_of_bounds.phpt
  it("grapheme_* functions with out-of-bounds offsets", function () {
    expect(parser.parseCode("<?php\n// Offset == Length is legal.\nvar_dump(grapheme_strpos(\"foo\", \"bar\", 3));\nvar_dump(grapheme_stripos(\"foo\", \"bar\", 3));\nvar_dump(grapheme_strrpos(\"foo\", \"bar\", 3));\nvar_dump(grapheme_strripos(\"foo\", \"bar\", 3));\nvar_dump(grapheme_strpos(\"äöü\", \"bar\", 3));\nvar_dump(grapheme_stripos(\"äöü\", \"bar\", 3));\nvar_dump(grapheme_strrpos(\"äöü\", \"bar\", 3));\nvar_dump(grapheme_strripos(\"äöü\", \"bar\", 3));\necho \"\\n\";\n// Offset == -Length is legal.\nvar_dump(grapheme_strpos(\"foo\", \"bar\", -3));\nvar_dump(grapheme_stripos(\"foo\", \"bar\", -3));\nvar_dump(grapheme_strrpos(\"foo\", \"bar\", -3));\nvar_dump(grapheme_strripos(\"foo\", \"bar\", -3));\nvar_dump(grapheme_strpos(\"äöü\", \"bar\", -3));\nvar_dump(grapheme_stripos(\"äöü\", \"bar\", -3));\nvar_dump(grapheme_strrpos(\"äöü\", \"bar\", -3));\nvar_dump(grapheme_strripos(\"äöü\", \"bar\", -3));\necho \"\\n\";\n// Offset == Length is legal.\nvar_dump(grapheme_strpos(\"\", \"bar\", 0));\nvar_dump(grapheme_stripos(\"\", \"bar\", 0));\nvar_dump(grapheme_strrpos(\"\", \"bar\", 0));\nvar_dump(grapheme_strripos(\"\", \"bar\", 0));\necho \"\\n\";\n// Positive out of bounds.\ntry {\n    var_dump(grapheme_strpos(\"foo\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_stripos(\"foo\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strrpos(\"foo\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strripos(\"foo\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strpos(\"äöü\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_stripos(\"äöü\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strrpos(\"äöü\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strripos(\"äöü\", \"bar\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\necho \"\\n\";\n// Negative out of bounds.\ntry {\n    var_dump(grapheme_strpos(\"foo\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_stripos(\"foo\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strrpos(\"foo\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strripos(\"foo\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strpos(\"äöü\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_stripos(\"äöü\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strrpos(\"äöü\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strripos(\"äöü\", \"bar\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\necho \"\\n\";\n// Empty needle +  out of bounds\ntry {\n    var_dump(grapheme_strpos(\"äöü\", \"\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_stripos(\"äöü\", \"\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strrpos(\"äöü\", \"\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strripos(\"äöü\", \"\", 4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strpos(\"äöü\", \"\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_stripos(\"äöü\", \"\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strrpos(\"äöü\", \"\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\ntry {\n    var_dump(grapheme_strripos(\"äöü\", \"\", -4));\n} catch (ValueError $e) {\n    echo $e->getMessage(), \"\\n\";\n}\necho \"\\n\";\nvar_dump(grapheme_substr(\"foo\", 3));\nvar_dump(grapheme_substr(\"foo\", -3));\nvar_dump(grapheme_substr(\"foo\", 4));\nvar_dump(grapheme_substr(\"foo\", -4));\nvar_dump(grapheme_substr(\"äöü\", 3));\nvar_dump(grapheme_substr(\"äöü\", -3));\nvar_dump(grapheme_substr(\"äöü\", 4));\nvar_dump(grapheme_substr(\"äöü\", -4));\nvar_dump(grapheme_substr(\"foo\", 0, 3));\nvar_dump(grapheme_substr(\"foo\", 0, -3));\nvar_dump(grapheme_substr(\"foo\", 0, 4));\nvar_dump(grapheme_substr(\"foo\", 0, -4));\nvar_dump(grapheme_substr(\"äöü\", 0, 3));\nvar_dump(grapheme_substr(\"äöü\", 0, -3));\nvar_dump(grapheme_substr(\"äöü\", 0, 4));\nvar_dump(grapheme_substr(\"äöü\", 0, -4));\nvar_dump(grapheme_substr(\"äöü\", -4, 1));\nvar_dump(grapheme_substr(\"äöü\", -4, -1));\nvar_dump(grapheme_substr(\"äöü\", 2, -2));\n?>")).toMatchSnapshot();
  });
});
