// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/standard/tests/strings/basename_basic.phpt
  it("Test basename() function : basic functionality", function () {
    expect(parser.parseCode("<?php\n$file_paths = array (\n  /* simple paths */\n  array(\"bar\"),\n  array(\"/foo/bar\"),\n  array(\"foo/bar\"),\n  array(\"/bar\"),\n  /* simple paths with trailing slashes */\n  array(\"bar/\"),\n  array(\"/bar/\"),\n  array(\"/foo/bar/\"),\n  array(\"foo/bar/\"),\n  array(\"/bar/\"),\n  /* paths with suffix removal */\n  array(\"bar.gz\", \".gz\"),\n  array(\"bar.gz\", \"bar.gz\"),\n  array(\"/foo/bar.gz\", \".gz\"),\n  array(\"foo/bar.gz\", \".gz\"),\n  array(\"/bar.gz\", \".gz\"),\n  /* paths with suffix and trailing slashes with suffix removal*/\n  array(\"bar.gz/\", \".gz\"),\n  array(\"/bar.gz/\", \".gz\"),\n  array(\"/foo/bar.gz/\", \".gz\"),\n  array(\"foo/bar.gz/\", \".gz\"),\n  array(\"/bar.gz/\", \".gz\"),\n  /* paths with basename only suffix, with suffix removal*/\n  array(\"/.gz\", \".gz\"),\n  array(\".gz\", \".gz\"),\n  array(\"/foo/.gz\", \".gz\"),\n  /* paths with basename only suffix & trailing slashes, with suffix removal*/\n  array(\".gz/\", \".gz\"),\n  array(\"/foo/.gz/\", \".gz\"),\n  array(\"foo/.gz/\", \".gz\"),\n  /* paths with binary value to check if the function is binary safe*/\n  array(\"foo\".chr(0).\"bar\"),\n  array(\"/foo\".chr(0).\"bar\"),\n  array(\"/foo\".chr(0).\"bar/\"),\n  array(\"foo\".chr(0).\"bar/\"),\n  array(\"foo\".chr(0).\"bar/test\"),\n  array(\"/foo\".chr(0).\"bar/bar.gz\", \".gz\"),\n  array(\"/foo\".chr(0).\"bar/bar.gz\")\n);\nfunction check_basename( $path_arrays ) {\n   $loop_counter = 1;\n   foreach ($path_arrays as $path) {\n     echo \"\\n--Iteration $loop_counter--\\n\"; $loop_counter++;\n     if( 1 == count($path) ) { // no suffix provided\n       var_dump( basename($path[0]) );\n     } else { // path as well as suffix provided,\n       var_dump( basename($path[0], $path[1]) );\n     }\n   }\n}\necho \"*** Testing basic operations ***\\n\";\ncheck_basename( $file_paths );\necho \"Done\\n\";\n?>")).toMatchSnapshot();
  });
});
