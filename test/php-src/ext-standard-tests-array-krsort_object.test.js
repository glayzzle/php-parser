// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/standard/tests/array/krsort_object.phpt
  it("Test krsort() function : object functionality - sort objects", function () {
    expect(parser.parseCode("<?php\n/*\n * testing krsort() by providing array of integer/string objects with following flag values:\n *  1.Default flag value\n *  2.SORT_REGULAR - compare items normally\n*/\necho \"*** Testing krsort() : object functionality ***\\n\";\n// class declaration for integer objects\nclass IntegerObject\n{\n  public $class_value;\n  // initializing object member value\n  function __construct($value){\n    $this->class_value = $value;\n  }\n}\n// class declaration for string objects\nclass StringObject\n{\n  public $class_value;\n  // initializing object member value\n  function __construct($value){\n    $this->class_value = $value;\n   }\n  // return string value\n  function __tostring() {\n   return (string)$this->value;\n  }\n}\n// array of integer objects with different key values\n$unsorted_int_obj = array (\n  10 => new IntegerObject(11), 20 =>  new IntegerObject(66),\n  3 => new IntegerObject(23), 4 => new IntegerObject(-5),\n  50 => new IntegerObject(0.001), 6 => new IntegerObject(0)\n);\n// array of string objects with different key values\n$unsorted_str_obj = array (\n  \"axx\" => new StringObject(\"axx\"), \"t\" => new StringObject(\"t\"),\n  \"w\" => new StringObject(\"w\"), \"py\" => new StringObject(\"py\"),\n  \"apple\" => new StringObject(\"apple\"), \"Orange\" => new StringObject(\"Orange\"),\n  \"Lemon\" => new StringObject(\"Lemon\"), \"aPPle\" => new StringObject(\"aPPle\")\n);\necho \"\\n-- Testing krsort() by supplying various object arrays, 'flag' value is default --\\n\";\n// testing krsort() function by supplying integer object array, flag value is default\n$temp_array = $unsorted_int_obj;\nvar_dump(krsort($temp_array) );\nvar_dump($temp_array);\n// testing krsort() function by supplying string object array, flag value is default\n$temp_array = $unsorted_str_obj;\nvar_dump(krsort($temp_array) );\nvar_dump($temp_array);\necho \"\\n-- Testing krsort() by supplying various object arrays, 'flag' value is SORT_REGULAR --\\n\";\n// testing krsort() function by supplying integer object array, flag value = SORT_REGULAR\n$temp_array = $unsorted_int_obj;\nvar_dump(krsort($temp_array, SORT_REGULAR) );\nvar_dump($temp_array);\n// testing krsort() function by supplying string object array, flag value = SORT_REGULAR\n$temp_array = $unsorted_str_obj;\nvar_dump(krsort($temp_array, SORT_REGULAR) );\nvar_dump($temp_array);\necho \"Done\\n\";\n?>")).toMatchSnapshot();
  });
});
