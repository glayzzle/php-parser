// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/intl/tests/dateformat_get_set_pattern2.phpt
  it("datefmt_get_pattern_code and datefmt_set_pattern_code() icu >= 4.8", function () {
    expect(parser.parseCode("<?php\n/*\n * Test for the datefmt_get_pattern & datefmt_set_pattern function\n */\nfunction ut_main()\n{\n        $pattern_arr = array (\n                'DD-MM-YYYY hh:mm:ss',\n        'yyyy-DDD.hh:mm:ss z',\n                \"yyyy/MM/dd\",\n                \"yyyyMMdd\"\n        );\n        $res_str = '';\n        $start_pattern = 'dd-MM-YY';\n        $res_str .= \"\\nCreating IntlDateFormatter with pattern = $start_pattern \";\n        //$fmt = ut_datefmt_create( \"en-US\",  IntlDateFormatter::SHORT, IntlDateFormatter::SHORT , 'America/New_York', IntlDateFormatter::GREGORIAN , $start_pattern );\n        $fmt = ut_datefmt_create( \"en-US\",  IntlDateFormatter::FULL, IntlDateFormatter::FULL, 'America/New_York', IntlDateFormatter::GREGORIAN , $start_pattern );\n        $pattern = ut_datefmt_get_pattern( $fmt);\n        $res_str .= \"\\nAfter call to get_pattern :  pattern= $pattern\";\n    $formatted = ut_datefmt_format($fmt,0);\n    $res_str .= \"\\nResult of formatting timestamp=0 is :  \\n$formatted\";\n        foreach( $pattern_arr as $pattern_entry )\n        {\n                $res_str .= \"\\n-------------------\";\n                $res_str .= \"\\nSetting IntlDateFormatter with pattern = $pattern_entry \";\n                ut_datefmt_set_pattern( $fmt , $pattern_entry );\n                $pattern = ut_datefmt_get_pattern( $fmt);\n                $res_str .= \"\\nAfter call to get_pattern :  pattern= $pattern\";\n        $formatted = ut_datefmt_format($fmt,0);\n                $res_str .= \"\\nResult of formatting timestamp=0 with the new pattern is :  \\n$formatted\";\n                $res_str .= \"\\n\";\n        }\n        return $res_str;\n}\ninclude_once( 'ut_common.inc' );\n// Run the test\nut_run();\n?>")).toMatchSnapshot();
  });
});
