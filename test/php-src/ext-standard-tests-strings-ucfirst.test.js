// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/standard/tests/strings/ucfirst.phpt
  it("\"ucfirst()\" function", function () {
    expect(parser.parseCode("<?php\n/* Make a string's first character uppercase */\necho \"#### Basic and Various operations ####\\n\";\n$str_array = array(\n            \"testing ucfirst.\",\n            \"1.testing ucfirst\",\n            \"hELLO wORLD\",\n            'hELLO wORLD',\n                    \"\\0\",\t\t// Null\n                    \"\\x00\",\t\t// Hex Null\n                    \"\\x000\",\n                    \"abcd\",\t\t// double quoted string\n                    'xyz',\t\t// single quoted string\n                    \"-3\",\n                    -3,\n                    '-3.344',\n                    -3.344,\n                    \"NULL\",\n                    \"0\",\n                    0,\n                    TRUE,\t\t// bool type\n                    \"TRUE\",\n                    \"1\",\n                    1,\n                    1.234444,\n                    FALSE,\n                    \"FALSE\",\n                    \" \",\n                    \"     \",\n                    'b',\t\t// single char\n                    '\\t',\t\t// escape sequences\n                    \"\\t\",\n                    \"12\",\n                    \"12twelve\",\t\t// int + string\n              );\n/* loop to test working of ucfirst with different values */\nforeach ($str_array as $string) {\n  var_dump( ucfirst($string) );\n}\necho \"\\n#### Testing miscellaneous inputs ####\\n\";\necho \"\\n--- Testing objects ---\\n\";\n/* we get \"Recoverable fatal error: saying Object of class could not be converted\n        to string\" by default when an object is passed instead of string:\nThe error can be  avoided by choosing the __toString magix method as follows: */\nclass StringCapable {\n  function __toString() {\n    return \"hello, world\";\n  }\n}\n$obj_string = new StringCapable;\nvar_dump(ucfirst(\"$obj_string\"));\necho \"\\n--- Testing a longer and heredoc string ---\\n\";\n$string = <<<EOD\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\n@#$%^&**&^%$#@!~:())))((((&&&**%$###@@@!!!~~~~@###$%^&*\nabcdefghijklmnopqrstuvwxyz0123456789abcdefghijklmnopqrstuvwxyz0123456789\nEOD;\nvar_dump(ucfirst($string));\necho \"\\n--- Testing a heredoc null string ---\\n\";\n$str = <<<EOD\nEOD;\nvar_dump(ucfirst($str));\necho \"\\n--- Testing simple and complex syntax strings ---\\n\";\n$str = 'world';\n/* Simple syntax */\nvar_dump(ucfirst(\"$str\"));\nvar_dump(ucfirst(\"$str'S\"));\nvar_dump(ucfirst(\"$strS\"));\n/* String with curly braces, complex syntax */\nvar_dump(ucfirst(\"${str}S\"));\nvar_dump(ucfirst(\"{$str}S\"));\necho \"\\n--- Nested ucfirst() ---\\n\";\nvar_dump(ucfirst(ucfirst(\"hello\")));\necho \"Done\\n\";\n?>")).toMatchSnapshot();
  });
});
