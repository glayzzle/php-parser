// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // ext/opcache/tests/jit/cmp_003.phpt
  it("JIT CMP: 003 Comparison with NaN", function () {
    expect(parser.parseCode("<?php\nfunction t() {\n    echo \"!\";\n    return true;\n}\nfunction f() {\n    echo \"!\";\n    return false;\n}\n$a = 0.0;\n$i = 0;\n$b = NAN;\n$c = true;\n$d = false;\nvar_dump($a == $b);\nvar_dump($a != $b);\nvar_dump($a < $b);\nvar_dump($a > $b);\nvar_dump($a <= $b);\nvar_dump($a >= $b);\nvar_dump($a == $b ? 1 : 0);\nvar_dump($a != $b ? 1 : 0);\nvar_dump($a < $b ? 1 : 0);\nvar_dump($a > $b ? 1 : 0);\nvar_dump($a <= $b ? 1 : 0);\nvar_dump($a >= $b ? 1 : 0);\nif ($a == $b) {\n} else {\n    echo \"1\\n\";\n}\nif ($a != $b) {\n} else {\n    echo \"2\\n\";\n}\nif ($a < $b) {\n} else {\n    echo \"3\\n\";\n}\nif ($a > $b) {\n} else {\n    echo \"4\\n\";\n}\nif ($a <= $b) {\n} else {\n    echo \"5\\n\";\n}\nif ($a >= $b) {\n} else {\n    echo \"6\\n\";\n}\nvar_dump($i == $b ? 1 : 0);\nvar_dump($i != $b ? 1 : 0);\nvar_dump($i < $b ? 1 : 0);\nvar_dump($i > $b ? 1 : 0);\nvar_dump($i <= $b ? 1 : 0);\nvar_dump($i >= $b ? 1 : 0);\nif ($i == $b) {\n} else {\n    echo \"1\\n\";\n}\nif ($i != $b) {\n} else {\n    echo \"2\\n\";\n}\nif ($i < $b) {\n} else {\n    echo \"3\\n\";\n}\nif ($i > $b) {\n} else {\n    echo \"4\\n\";\n}\nif ($i <= $b) {\n} else {\n    echo \"5\\n\";\n}\nif ($i >= $b) {\n} else {\n    echo \"6\\n\";\n}\nvar_dump($a == $b && t());\nvar_dump($a != $b && t());\nvar_dump($a < $b && t());\nvar_dump($a > $b && t());\nvar_dump($a <= $b && t());\nvar_dump($a >= $b && t());\nvar_dump($a == $b || f());\nvar_dump($a != $b || f());\nvar_dump($a < $b || f());\nvar_dump($a > $b || f());\nvar_dump($a <= $b || f());\nvar_dump($a >= $b || f());\nvar_dump($i == $b && t());\nvar_dump($i != $b && t());\nvar_dump($i < $b && t());\nvar_dump($i > $b && t());\nvar_dump($i <= $b && t());\nvar_dump($i >= $b && t());\nvar_dump($i == $b || f());\nvar_dump($i != $b || f());\nvar_dump($i < $b || f());\nvar_dump($i > $b || f());\nvar_dump($i <= $b || f());\nvar_dump($i >= $b || f());\n$a=NAN;\nvar_dump($a == $b);\nvar_dump($a != $b);\nvar_dump($a < $b);\nvar_dump($a > $b);\nvar_dump($a <= $b);\nvar_dump($a >= $b);\nvar_dump($a == $b ? 1 : 0);\nvar_dump($a != $b ? 1 : 0);\nvar_dump($a < $b ? 1 : 0);\nvar_dump($a > $b ? 1 : 0);\nvar_dump($a <= $b ? 1 : 0);\nvar_dump($a >= $b ? 1 : 0);\n?>")).toMatchSnapshot();
  });
});
