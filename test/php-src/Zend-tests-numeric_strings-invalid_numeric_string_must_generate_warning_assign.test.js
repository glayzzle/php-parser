// eslint-disable prettier/prettier
const parser = require("../main");

describe("php-src tests", function () {
  // Zend/tests/numeric_strings/invalid_numeric_string_must_generate_warning_assign.phpt
  it("Invalid numeric string TypeErrors and E_WARNINGs, combined assignment operations", function () {
    expect(parser.parseCode("<?php\n// prevents CT eval\nfunction foxcache($val) {\n    return [$val][0];\n}\n$a = foxcache(\"2 Lorem\");\n$a += \"3 ipsum\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"dolor\");\n    $a += \"sit\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"5 amet,\");\n$a -= \"7 consectetur\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"adipiscing\");\n    $a -= \"elit,\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"11 sed\");\n$a *= \"13 do\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"eiusmod\");\n    $a *= \"tempor\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"17 incididunt\");\n$a /= \"19 ut\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"labore\");\n    $a /= \"et\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"23 dolore\");\n$a **= \"29 magna\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"aliqua.\");\n    $a **= \"Ut\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"31 enim\");\n$a %= \"37 ad\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"minim\");\n    $a %= \"veniam,\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo get_class($e) . ': ' . $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"41 minim\");\n$a <<= \"43 veniam,\";\ntry {\n    var_dump($a);\n    $a = foxcache(\"quis\");\n    $a <<= \"nostrud\";\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\nvar_dump($a);\necho \"---\", PHP_EOL;\n$a = foxcache(\"47 exercitation\");\n$a >>= \"53 ullamco\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"laboris\");\n    $a >>= \"nisi\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"59 ut\");\n$a |= 61;\nvar_dump($a);\n$a = foxcache(67);\n$a |= \"71 aliquip\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"ex\");\n    $a |= 73;\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\ntry {\n    $a = foxcache(79);\n    $a |= \"ea\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"83 commodo\");\n$a &= 89;\nvar_dump($a);\n$a = foxcache(97);\n$a &= \"101 consequat.\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"Duis\");\n    $a &= 103;\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\ntry {\n    $a = foxcache(107);\n    $a &= \"aute\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\necho \"---\", PHP_EOL;\n$a = foxcache(\"109 irure\");\n$a ^= 113;\nvar_dump($a);\n$a = foxcache(127);\n$a ^= \"131 dolor\";\nvar_dump($a);\ntry {\n    $a = foxcache(\"in\");\n    $a ^= 137;\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\ntry {\n    $a = foxcache(139);\n    $a ^= \"reprehenderit\";\n    var_dump($a);\n} catch (\\TypeError $e) {\n    echo $e->getMessage() . \\PHP_EOL;\n}\n?>")).toMatchSnapshot();
  });
});
